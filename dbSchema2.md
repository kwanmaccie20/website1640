CREATE TABLE staff (
id SERIAL PRIMARY KEY,
name VARCHAR(255) NOT NULL,
email VARCHAR(255) NOT NULL UNIQUE,
department_id INTEGER NOT NULL REFERENCES departments(id),
is_admin BOOLEAN DEFAULT FALSE,
agreed_to_terms BOOLEAN DEFAULT FALSE,
created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE TABLE departments (
id SERIAL PRIMARY KEY,
name VARCHAR(255) NOT NULL,
coordinator_id INTEGER NOT NULL REFERENCES staff(id),
created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE TABLE categories (
id SERIAL PRIMARY KEY,
name VARCHAR(255) NOT NULL UNIQUE,
created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE TABLE ideas (
id SERIAL PRIMARY KEY,
title VARCHAR(255) NOT NULL,
description TEXT NOT NULL,
author_id INTEGER NOT NULL REFERENCES staff(id),
category_id INTEGER NOT NULL REFERENCES categories(id),
is_enabled BOOLEAN DEFAULT TRUE,
is_anonymous BOOLEAN DEFAULT FALSE,
created_at TIMESTAMP NOT NULL DEFAULT NOW(),
closure_date DATE NOT NULL,
final_closure_date DATE NOT NULL
);

CREATE TABLE documents (
id SERIAL PRIMARY KEY,
idea_id INTEGER NOT NULL REFERENCES ideas(id),
filename VARCHAR(255) NOT NULL,
filedata BYTEA NOT NULL,
created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE TABLE comments (
id SERIAL PRIMARY KEY,
idea_id INTEGER NOT NULL REFERENCES ideas(id),
author_id INTEGER NOT NULL REFERENCES staff(id),
comment TEXT NOT NULL,
is_anonymous BOOLEAN DEFAULT FALSE,
created_at TIMESTAMP NOT NULL DEFAULT NOW()
);

CREATE TABLE votes (
id SERIAL PRIMARY KEY,
idea_id INTEGER NOT NULL REFERENCES ideas(id),
voter_id INTEGER NOT NULL REFERENCES staff(id),
is_upvote BOOLEAN NOT NULL,
created_at TIMESTAMP NOT NULL DEFAULT NOW()
);